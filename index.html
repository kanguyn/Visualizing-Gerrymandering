<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <!-- Other CSS -->
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <link rel="stylesheet" href="code/slider.css">
        <link rel="stylesheet" href="code/index_style.css">
        
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <!-- <script src="d3.min.js"></script> -->
        <script src="https://d3js.org/d3-queue.v3.min.js"></script>
        <script src="//d3js.org/d3.v4.min.js"></script>
        <script src="code/lib/d3.tip.v0.6.3.js"></script>
        <script src="code/updateRange4.js"></script>
        <!-- <script src="code/lib/d3.v3.min.js"  charset="utf-8"></script> -->

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-47982219-1', 'auto');
          ga('send', 'pageview');
        </script>


        <title>Visualizing Gerrymandering</title>
        <!-- <link rel="stylesheet" type="text/css" href="mpg.css" /> -->
        
    </head>

    <body>
        <header>6.894 Interactive Data Visualization Final Project</header>
        <div class="title">
            <h3>Interactive plan metric distributions in Virginia</h3>
        </div>

        <p id = "explain"> Gerrymandering is a practice intended to establish a political advantage for a particular party of group by manipulating district boundaries. The Metric Geometry and Gerrymandering Group (MGGG) is a research group from Tufts University and MIT that focuses on applications of geometry and computing to U.S. redistricting and gerrymandering. They conduct research on the redistricting problem, build open-source tools and resources to enable the public to better understand districts and consequences and offer expertise opinion to different stakeholders on all sides. They specifically interested in the interplay between the legal constraints and the measurements of interes and among the measurements themselves and the researchers have struggled to understand the trade-offs between these intertwined metrics. This is where we come in to help with an interactive data visualization system.

        </p>

        <h5><p> Here is an example of a simulated districting plan</p></h5>

        <figure><img src="images/Simulated_plan.png" class="sk" alt="Sketch_sim"/><figcaption>Simulated Plan for 11 Districts in Virginia</figcaption></figure>

        <p>Please, see our write-up <a href="http://github.mit.edu/pages/6894-sp19/Visualizing_Gerrymandering/writeup.html">here</a>.</p>

        <p>relevant charts <a href="https://vickyliuwenwei.github.io/VA_Gerrymandering/">here</a>.</p>

        <p>Move your mouse to select for what you consider as a reasonable range of a particular metric of your interest, and observe how moving the range affects the distribution of other metrics! </p>

        <!-- <p>Please see our paper <a href="https://github.mit.edu/pages/6894-sp19/">here</a>.</p> -->

        <div class="side-filter">
            <p>Choose a metric to filter on:</p><br>
            <div class="control">
                <label class="radio">
                <input type="radio" name="metric_selection" id="check_selection_nb_sp" onclick="startHere()">
                Number of splits
                </label>
                <input type="radio" name="metric_selection" id="check_selection_nb_cuts" checked="true" onclick="startHere()">
                Number of cuts
                <input type="radio" name="metric_selection" id="check_selection_egs"  onclick="startHere()">
                Efficiency gap
                </label>
                </label>
                <input type="radio" name="metric_selection" id="check_selection_mms" onclick="startHere()">
                Mean-Median
                </label>
                <input type="radio" name="metric_selection" id="check_selection_hmss" onclick="startHere()">
                Number of Democratic seats
                </label>
                <input type="radio" name="metric_selection" id="check_selection_p_votes" onclick="startHere()">
                Democratic vote shares for the most democratic district
                </label>
            </div>
        </div>

        <div id="slider-range"></div>
        <script src="https://d3js.org/d3-queue.v3.min.js"></script>
        <script type="text/javascript">

            var update = function(){
                fv.update_range();
            };

            var dataLoaded = function(error,_mapData,_filterData){
                graph = false;
                var xScale_egs, yScale_egs, xAxis_egs, yAxis_egs, svg_egs, bar_egs, rects_egs;
                var xScale_nb_sp, yScale_nb_sp, xAxis_nb_sp, yAxis_nb_sp, svg_nb_sp, bar_nb_sp, rects_nb_sp;
                var xScale_nb_cuts, yScale_nb_cuts, xAxis_nb_cuts, yAxis_nb_cuts, svg_nb_cuts, bar_nb_cuts, rects_nb_cuts;
                var xScale_mms, yScale_mms, xAxis_mms, yAxis_mms, svg_mms, bar_mms, rects_mms;
                var xScp_votes, yScale_hmss, xAxis_hmss, yAxis_hmss, svg_hmss, bar_hmss, rects_hmss;
                var xScale_p_votes, yScale_p_votes, xAxis_p_votes, yAxis_p_votes, svg_p_votes, bar_p_votes, rects_p_votes;
                var xScale, yScale, xAxis, yAxis;
                var cutoff_max ;
                var thresholdLabel_max;
                var cutoff_min ;
                var thresholdLabel_min;
                

                var mapData = _mapData;
                var filterData = _filterData;
                fv = new Range('#Range',mapData, filterData);
            };
            var path = "https://kanguyn.github.io/Visualizing-Gerrymandering/data/VA_data/";
            var startHere = function(){
                var q = d3.queue();
                q.defer(d3.csv, path + "plan_metrics_ATG17.csv")
                .defer(d3.csv, path + "plan_metrics_ATG17.csv")
                .await(dataLoaded); // Call dataLoaded function
           };
           startHere();
        </script>

        <div id="vaContainer">
            <div class="column">
                <div id="hist_egs" class="graph">
                    <p class="title_hist">Distribution of the <b>efficiency gap</b> across possible districting plans</p>
                    <svg id = "egs">
                    </svg>
                 </div>
            </div>
            <div class="column">
                <div id="hist_sp" class="graph">
                    <p class="title_hist">Distribution of the <b>number of splits</b> across possible districting plans</p>
                    <svg id="nb_sp">
                    </svg>
                </div>
            </div>
        
            <div class="column">
                <div id="hist_cuts" class="graph">
                    <p class="title_hist">Distribution of the <b>number of cuts</b> across possible districting plans</p>
                    <svg id="nb_cuts"> 
                        <br>
                    </svg>
                </div>
            </div>
        
            <div class="column">
                <div id="hist_mms" class="graph">
                    <p class="title_hist">Distribution of the <b>mean-median</b> across possible districting plans</p>
                    <svg id="mms">
                        <br>
                    </svg>
                </div>
            </div>

            <div class="column">   
                <div id="hist_hmss" class="graph">
                    <p class="title_hist">Distribution of the <b>number of Democratic seats</b> across possible districting plans</p>
                    <svg id="hmss">
                        <br>
                    </svg>
                </div>
            </div>

            <div class="column">
                <div id="hist_votes" class="graph">
                    <p class="title_hist">Distribution of the <b>Democratic votes</b> across possible districting plans</p>
                    <svg id="p_votes">
                        <br>
                    </svg>
                </div>
            </div>
        </div>

        

        <footer>
            <p>&copy; Copyright 2019 &bull; Millie, Nhi, Vicky </p>
        </footer>
    </body>
</html>